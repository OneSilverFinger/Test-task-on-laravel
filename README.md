# Система товарно-денежного учёта для ИП

Система товарно-денежного учёта для ИП с двумя магазинами на Laravel + MySQL.

## Возможности

- ✅ Учёт закупок у поставщиков и продаж покупателям
- ✅ Фиксация: кто, что и когда купил или продал
- ✅ Учёт дебиторской и кредиторской задолженности с поддержкой частичных оплат
- ✅ Учёт остатков товаров на складе в разрезе каждого магазина
- ✅ Учёт движения денежных средств и текущего остатка в кассе
- ✅ Поддержка различных единиц измерения товаров
- ✅ Полный интерфейс для ввода данных и просмотра отчётов
- ✅ Оптимизировано для работы с миллионами записей

## Требования

- Docker
- Docker Compose

## Установка

1. Запустите контейнеры:
```bash
docker-compose up -d --build
```

2. Установите зависимости Composer:
```bash
docker-compose exec app composer install
```

3. Создайте файл .env (если его нет):
```bash
# Windows PowerShell
Copy-Item .env.example .env

# Или Linux/Mac
cp .env.example .env
```

4. Сгенерируйте ключ приложения:
```bash
docker-compose exec app php artisan key:generate
```

5. Запустите миграции и сидеры:
```bash
docker-compose exec app php artisan migrate --seed
```

## Доступ к приложению

- Веб-приложение: http://localhost:8080
- MySQL: localhost:3306
  - Database: laravel
  - Username: laravel
  - Password: root
  - Root Password: root

## Использование

### Начальные данные

После выполнения миграций с сидерами будут созданы два магазина:
- Магазин №1
- Магазин №2

### Работа с системой

1. **Справочники:**
   - Создайте поставщиков, покупателей и товары через соответствующие разделы

2. **Закупки:**
   - Создайте закупку у поставщика
   - Система автоматически обновит остатки на складе выбранного магазина
   - Добавьте оплаты закупки (можно частично)

3. **Продажи:**
   - Создайте продажу покупателю
   - Система автоматически проверит остатки и обновит их
   - Добавьте оплаты продажи (можно частично)

4. **Отчёты:**
   - Остатки товаров - просмотр остатков по магазинам
   - Задолженности - дебиторская и кредиторская задолженность
   - Движение товаров - история всех операций с товарами
   - Движение денег - история операций с денежными средствами

### Особенности производительности

- Индексы на всех ключевых полях для быстрых запросов
- Составные индексы для сложных запросов
- Оптимизированные запросы с использованием отношений Eloquent
- Пагинация для больших объёмов данных

## Команды

### Выполнение Artisan команд
```bash
docker-compose exec app php artisan [command]
```

### Выполнение Composer команд
```bash
docker-compose exec app composer [command]
```

### Остановка контейнеров
```bash
docker-compose down
```

### Остановка с удалением volumes
```bash
docker-compose down -v
```

## Структура проекта

- `app/Models/` - Eloquent модели
- `app/Http/Controllers/` - Контроллеры
- `app/Services/` - Бизнес-логика (управление остатками, заказами)
- `database/migrations/` - Миграции БД
- `resources/views/` - Blade шаблоны
- `routes/web.php` - Маршруты приложения

